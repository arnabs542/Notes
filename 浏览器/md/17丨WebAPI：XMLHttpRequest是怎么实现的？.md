# 17丨WebAPI：XMLHttpRequest是怎么实现的？
XMLHttpRequsest出现之前,如果服务器有数据更新，需要来刷新整个界面。

## 同步回调 和 异步回调
**回调函数**
将一个函数作为参数传给另外一个参数。

**同步回调**
回调函数在主函数返回之前执行。
消息队列的主线程的消息循环，保证了页面的运行。当循环系统运行，会维护一个系统调用栈。

**异步回调**
回调函数在主函数外部执行。

*异步函数两种执行方式*
1. 将异步函数做成一个任务添加到消息队列的最底部。
2. 将异步函数添加到微任务里面。

**XMLHttpRequest执行过程中**
1. JavaSCript创建一个XMLHttpRequest对象的XHR来执行网络操作。
2. 为XHL来注册回调函数。
3. 配置基础请求信息。通过Open函数来配置，请求方法（get,post）和请求方式(同步或异步)。通过XHR来配置其他的信息。
4. 渲染请求发送给网络进程，网络进程对资源下载。下载完成以后，网络进程用IPC来通知渲染进程。渲染进程收到网络进程发来的IPC，会讲XHR封装成函数并添加到消息队列中，然后等待循环系统的执行。

**跨域**
1. A站点访问不同源B站点。

**https混合内容**
1. 页面中包含了不符合https安全要求的内容。

## 总结
1. 回调函数和系统调用栈。
2. 站在循环系统视角，分析XMLHttpRequest是如何工作的。
3. 由于安全因素会导致跨域和https混合内容。
